(()=>{const e=document.querySelector("#boardsContainer"),t=document.querySelector("#gameBoard");let o=document.querySelectorAll(".color-option");const n=document.getElementById("custom-modal"),c=document.getElementById("custom-modal-backdrop"),l=document.getElementById("restart-btn"),r=document.getElementById("undo-btn");let s,d,a,u,m,h,f,E=[];function y(e){e.classList.contains("d-none")?e.classList.remove("d-none"):e.classList.add("d-none")}function k(e){e.forEach((e=>e.hasAttribute("style")&&e.removeAttribute("style")))}function g(){var n=t.cloneNode(!0);!function(e){let t=e.getElementsByClassName("status"),o=e.getElementsByClassName("guesses-dot");t=[...t],o=[...o],k(t),k(o)}(n),e.appendChild(n),o=n.querySelectorAll(".color-option"),o.forEach((e=>{e.addEventListener("click",C)})),n.querySelector("#check-btn").addEventListener("click",v),n.querySelector("#undo-btn").addEventListener("click",B)}function p(){let e;for(let t=0;t<4;t++){for(e=b();d.includes(e);)e=b();d.push(e),s.push(E[e])}}function b(){return Math.floor(6*Math.random())}function C(t){let o="#"+t.target.dataset.color;u<4&&(e.lastElementChild.getElementsByClassName("guesses-dot")[u].style.backgroundColor=o,a.push(o),console.log(a),u++)}function v(){for(m=0,h=0,i=0;i<4;i++)if(a[i]==s[i])m++;else{for(let e=i+1;e<4;e++)a[i]==s[e]&&h++;for(let e=i-1;e>=0;e--)a[i]==s[e]&&h++}!function(){let t=e.lastElementChild.querySelectorAll(".status");for(let e=0;e<m;e++)t[e].style.backgroundColor="black";for(let e=m;e<m+h;e++)t[e].style.backgroundColor="white"}(),function(){if(4==m){let e=1==f?"round":"rounds";n.innerText=`You cracked the code! You have made it in ${f} ${e}!`,y(c),L()}else f++,g(),a=[],u=0}()}function L(){a=[],u=0,f=0,s=[],d=[],p();let t=e.querySelectorAll("#gameBoard");g(),t.forEach((e=>{e.remove()}))}function B(){a.pop(),e.lastElementChild.getElementsByClassName("guesses-dot")[u-1].style.backgroundColor="#fff",u--}u=0,s=[],d=[],a=[],f=1,o.forEach((e=>{E.push("#"+e.dataset.color)})),document.addEventListener("DOMContentLoaded",p),o.forEach((e=>{e.addEventListener("click",C)})),document.querySelector(".choice-instruction").addEventListener("click",(()=>{let e=document.createElement("p");e.innerHTML="<b>Task:</b> Solve the secret color code. Crack the code with as few attempts as possible.";let t=document.createElement("p");t.innerHTML="<b>How:</b>The code consists of 4 different colors.\n        Each color only occurs once. On the right side of the game board you see\n        how many pins are on the correct spot. Correct spot and correct color = black. Wrong spot but corrent color = white. Click 'Check' to check your answer.",n.innerText="",n.appendChild(e),n.appendChild(t),y(c)})),document.getElementById("check-btn").addEventListener("click",v),c.addEventListener("click",(function(e){"custom-modal-backdrop"==e.target.id&&y(c)})),r.addEventListener("click",B),l.addEventListener("click",L)})();